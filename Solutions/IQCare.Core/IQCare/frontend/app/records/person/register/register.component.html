<div class="row">
    <div class="col-lg-12 col-sm-12 col-xs-12">
        <div class="widget">
            <div class="widget-header bordered-bottom bordered-blue">
                <span class="widget-caption">Register Person</span>
            </div>
            <div class="widget-body">
                <div>
                    <form [formGroup]="formGroup">
                        <mat-horizontal-stepper #stepper="matHorizontalStepper" formArrayName="formArray" [linear]="isLinear">
                            <mat-step formGroupName="0" [stepControl]="formArray.get([0])">
                                <ng-template matStepLabel>Client Information</ng-template>
                                <div class="row">
                                    <div class="col-lg-3 col-sm-3 col-xs-12">
                                        <mat-form-field>
                                            <input tabindex="1" placeholder="Registration Date" matInput [matDatepicker]="myDatepicker" [max]="maxDate" (focus)="myDatepicker.open()"
                                                formControlName="RegistrationDate" required>
                                            <mat-datepicker-toggle matSuffix [for]="myDatepicker"></mat-datepicker-toggle>
                                            <mat-datepicker #myDatepicker name="RegistrationDate" ngDefaultControl></mat-datepicker>
                                        </mat-form-field>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-lg-3 col-sm-3 col-xs-12">
                                        <mat-form-field>
                                            <input matInput placeholder="First Name" formControlName="FirstName" id="firstName" name="firstName" tabindex="2" required>
                                        </mat-form-field>
                                    </div>

                                    <div class="col-lg-3 col-sm-3 col-xs-12">
                                        <mat-form-field>
                                            <input matInput placeholder="Middle Name" formControlName="MiddleName" id="middleName" name="middleName" tabindex="3">
                                        </mat-form-field>
                                    </div>

                                    <div class="col-lg-3 col-sm-3 col-xs-12">
                                        <mat-form-field>
                                            <input matInput placeholder="Last Name" formControlName="LastName" id="lastName" name="lastName" tabindex="4">
                                        </mat-form-field>
                                    </div>

                                    <div class="col-lg-3 col-sm-3 col-xs-12">
                                        <mat-form-field>
                                            <mat-select placeholder="Gender" formControlName="Sex" tabindex="5">
                                                <mat-option></mat-option>
                                                <mat-option *ngFor="let option of gender" [value]="option.itemId">{{option.itemName}}</mat-option>
                                            </mat-select>
                                        </mat-form-field>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-lg-3 col-sm-3 col-xs-12">
                                        <mat-form-field>
                                            <input placeholder="Date Of Birth" matInput [matDatepicker]="dateOfBirthDatepicker" [max]="maxDate" (focus)="dateOfBirthDatepicker.open()"
                                                formControlName="DateOfBirth" (dateInput)="onDate($event)" tabindex="6" required>
                                            <mat-datepicker-toggle matSuffix [for]="dateOfBirthDatepicker"></mat-datepicker-toggle>
                                            <mat-datepicker #dateOfBirthDatepicker name="DateOfBirth" ngDefaultControl></mat-datepicker>
                                        </mat-form-field>
                                    </div>

                                    <div class="col-lg-3 col-sm-3 col-xs-12">
                                        <mat-form-field>
                                            <input matInput placeholder="Age Years" formControlName="AgeYears" id="ageYears" name="ageYears" (keyup)="estimateDob()"
                                                required>
                                        </mat-form-field>
                                    </div>

                                    <div class="col-lg-3 col-sm-3 col-xs-12">
                                        <mat-form-field>
                                            <input matInput placeholder="Age Months" formControlName="AgeMonths" id="ageMonths" name="ageMonths" (keyup)="estimateDob()"
                                                required>
                                        </mat-form-field>
                                    </div>

                                    <div class="col-lg-3 col-sm-3 col-xs-12">
                                        <label>Date Of Birth Precision </label>
                                        <div>
                                            <mat-radio-group formControlName="DobPrecision" [required]="true">
                                                <mat-radio-button [value]="0" required>Estimated</mat-radio-button>
                                                <mat-radio-button [value]="1" required>Exact</mat-radio-button>
                                            </mat-radio-group>
                                        </div>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-lg-3 col-sm-3 col-xs-12">
                                        <mat-form-field>
                                            <mat-select placeholder="Marital Status" formControlName="MaritalStatus" tabindex="7">
                                                <mat-option></mat-option>
                                                <mat-option *ngFor="let option of maritalStatus" [value]="option.itemId">{{option.itemName}}</mat-option>
                                            </mat-select>
                                        </mat-form-field>
                                    </div>

                                    <div class="col-lg-3 col-sm-3 col-xs-12">
                                        <mat-form-field>
                                            <mat-select placeholder="Education Level" formControlName="EducationLevel" tabindex="8">
                                                <mat-option></mat-option>
                                                <mat-option *ngFor="let option of educationLevel" [value]="option.itemId">{{option.itemName}}</mat-option>
                                            </mat-select>
                                        </mat-form-field>
                                    </div>

                                    <div class="col-lg-3 col-sm-3 col-xs-12">
                                        <mat-form-field>
                                            <mat-select placeholder="Occupation" formControlName="Occupation" tabindex="9">
                                                <mat-option></mat-option>
                                                <mat-option *ngFor="let option of occupation" [value]="option.itemId">{{option.itemName}}</mat-option>
                                            </mat-select>
                                        </mat-form-field>
                                    </div>

                                    <div class="col-lg-3 col-sm-3 col-xs-12"></div>
                                </div>

                                <div class="row">
                                    <div class="col-lg-3 col-sm-3 col-xs-12">
                                        <mat-form-field>
                                            <mat-select placeholder="Identifier Type" formControlName="IdentifierType" tabindex="10">
                                                <mat-option></mat-option>
                                            </mat-select>
                                        </mat-form-field>
                                    </div>

                                    <div class="col-lg-3 col-sm-3 col-xs-12">
                                        <mat-form-field>
                                            <input matInput placeholder="Identifier Number" formControlName="IdentifierNumber" id="identifierNumber" name="identifierNumber"
                                                tabindex="11">
                                        </mat-form-field>
                                    </div>
                                </div>
                                <div>
                                    <button mat-raised-button color="accent" matStepperNext type="button">Next</button>
                                </div>
                            </mat-step>

                            <mat-step formGroupName="1" [stepControl]="formArray.get([1])">
                                <ng-template matStepLabel>Client Address</ng-template>
                                <div class="row">
                                    <div class="col-lg-3 col-sm-3 col-xs-12">
                                        <mat-form-field>
                                            <mat-select placeholder="County" formControlName="County" (selectionChange)="onCountyChange()">
                                                <mat-option></mat-option>
                                                <mat-option *ngFor="let option of counties" [value]="option.countyId">{{option.countyName}}</mat-option>
                                            </mat-select>
                                        </mat-form-field>
                                    </div>

                                    <div class="col-lg-3 col-sm-3 col-xs-12">
                                        <mat-form-field>
                                            <mat-select placeholder="Sub County" formControlName="SubCounty" (selectionChange)="onSubCountyChange()">
                                                <mat-option></mat-option>
                                                <mat-option *ngFor="let option of subCounties" [value]="option.subCountyId">{{option.subCountyName}}</mat-option>
                                            </mat-select>
                                        </mat-form-field>
                                    </div>

                                    <div class="col-lg-3 col-sm-3 col-xs-12">
                                        <mat-form-field>
                                            <mat-select placeholder="Ward" formControlName="Ward">
                                                <mat-option></mat-option>
                                                <mat-option *ngFor="let option of wards" [value]="option.wardId">{{option.wardName}}</mat-option>
                                            </mat-select>
                                        </mat-form-field>
                                    </div>

                                    <div class="col-lg-3 col-sm-3 col-xs-12">
                                        <mat-form-field>
                                            <input matInput placeholder="Nearest Health Center" formControlName="NearestHealthCenter" id="nearestHealthCenter" name="nearestHealthCenter">
                                        </mat-form-field>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-lg-3 col-sm-3 col-xs-12">
                                        <mat-form-field>
                                            <textarea matInput placeholder="Landmark/Village/Locator Information" formControlName="Landmark" id="landmark" name="landmark"></textarea>
                                        </mat-form-field>
                                    </div>
                                </div>

                                <div>
                                    <button mat-raised-button color="accent" matStepperPrevious type="button">Back</button>
                                    &nbsp;&nbsp;
                                    <button mat-raised-button color="accent" matStepperNext type="button">Next</button>
                                </div>
                            </mat-step>

                            <mat-step formGroupName="2" [stepControl]="formArray.get([2])">
                                <ng-template matStepLabel>Contacts & Emergency Contacts</ng-template>
                                <div class="row">
                                    <div class="col-lg-3 col-sm-3 col-xs-12">
                                        <mat-form-field>
                                            <input matInput placeholder="Mobile Number" formControlName="MobileNumber" id="mobileNumber" name="mobileNumber">
                                        </mat-form-field>
                                    </div>

                                    <div class="col-lg-3 col-sm-3 col-xs-12">
                                        <mat-form-field>
                                            <input matInput placeholder="Alternative Mobile Number" formControlName="AlternativeMobileNumber" id="alternativeMobileNumber"
                                                name="alternativeMobileNumber">
                                        </mat-form-field>
                                    </div>

                                    <div class="col-lg-3 col-sm-3 col-xs-12">
                                        <mat-form-field>
                                            <input matInput placeholder="Email Address" formControlName="EmailAddress" id="emailAddress" name="emailAddress">
                                        </mat-form-field>
                                    </div>
                                </div>

                                <div class="widget">
                                    <div class="widget-header bordered-bottom bordered-palegreen">
                                        <span class="widget-caption">Emergency Contact</span>
                                    </div>
                                    <div class="widget-body">
                                        <div class="row">
                                            <!--<label class="col-lg-2 col-sm-2 col-xs-12">Registered in Clinic?</label>-->
                                            <div class="col-lg-3 col-sm-3 col-xs-12">
                                                <!--<mat-radio-group formControlName="EmergencyContactInClinic">
                                                    <mat-radio-button [value]="1" required>Yes</mat-radio-button>
                                                    <mat-radio-button [value]="2" required>No</mat-radio-button>
                                                </mat-radio-group>-->

                                                <mat-form-field>
                                                    <mat-select placeholder="Registered in Clinic?" formControlName="EmergencyContactInClinic">
                                                        <mat-option></mat-option>
                                                        <mat-option [value]="1">Yes</mat-option>
                                                        <mat-option [value]="2">No</mat-option>
                                                    </mat-select>
                                                </mat-form-field>
                                            </div>
                                        </div>

                                        <div>&nbsp;</div>

                                        <div class="row">
                                            <div class="col-lg-3 col-sm-3 col-xs-12">
                                                <mat-form-field>
                                                    <input matInput placeholder="Emergency Contact FirstName" formControlName="EmergencyContactFirstName" id="emergencyContactFirstName"
                                                        name="emergencyContactFirstName">
                                                </mat-form-field>
                                            </div>

                                            <div class="col-lg-3 col-sm-3 col-xs-12">
                                                <mat-form-field>
                                                    <input matInput placeholder="Emergency Contact MiddleName" formControlName="EmergencyContactMiddleName" id="emergencyContactMiddleName"
                                                        name="emergencyContactMiddleName">
                                                </mat-form-field>
                                            </div>

                                            <div class="col-lg-3 col-sm-3 col-xs-12">
                                                <mat-form-field>
                                                    <input matInput placeholder="Emergency Contact LastName" formControlName="EmergencyContactLastName" id="emergencyContactLastName"
                                                        name="emergencyContactLastName">
                                                </mat-form-field>
                                            </div>

                                            <div class="col-lg-3 col-sm-3 col-xs-12">
                                                <label>Gender </label>
                                                <div>
                                                    <mat-radio-group formControlName="EmergencyContactSex">
                                                        <mat-radio-button value="0" required>Male</mat-radio-button>
                                                        <mat-radio-button value="1" required>Female</mat-radio-button>
                                                    </mat-radio-group>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="row">
                                            <div class="col-lg-3 col-sm-3 col-xs-12">
                                                <mat-form-field>
                                                    <mat-select placeholder="Emergency Contact Relationship" formControlName="EmergencyContactRelationship" id="emergencyContactRelationship"
                                                        name="emergencyContactRelationship">
                                                        <mat-option></mat-option>
                                                    </mat-select>
                                                </mat-form-field>
                                            </div>


                                            <div class="col-lg-3 col-sm-3 col-xs-12">
                                                <mat-form-field>
                                                    <input matInput placeholder="Emergency Contact Mobile No." formControlName="EmergencyContactMobileNumber" id="emergencyContactMobileNumber"
                                                        name="emergencyContactMobileNumber">
                                                </mat-form-field>
                                            </div>
                                        </div>
                                    </div>
                                </div>


                                <div class="row">
                                    <button mat-raised-button color="accent" matStepperPrevious type="button">Back</button>
                                    &nbsp;&nbsp;
                                    <button mat-raised-button color="accent" matStepperNext type="button">Next</button>
                                </div>
                            </mat-step>

                            <mat-step formGroupName="3" [stepControl]="formArray.get([3])">
                                <ng-template matStepLabel>Next Of Kin</ng-template>

                                <div class="row">
                                    <div class="col-lg-3 col-sm-3 col-xs-12">
                                        <mat-form-field>
                                            <input matInput placeholder="Kin's FirstName" formControlName="NextOfKinFirstName" id="nextOfKinFirstName" name="nextOfKinFirstName">
                                        </mat-form-field>
                                    </div>

                                    <div class="col-lg-3 col-sm-3 col-xs-12">
                                        <mat-form-field>
                                            <input matInput placeholder="Kin's MiddleName" formControlName="NextOfKinMiddleName" id="nextOfKinMiddleName" name="nextOfKinMiddleName">
                                        </mat-form-field>
                                    </div>

                                    <div class="col-lg-3 col-sm-3 col-xs-12">
                                        <mat-form-field>
                                            <input matInput placeholder="Kin's LastName" formControlName="NextOfKinLastName" id="nextOfKinLastName" name="nextOfKinLastName">
                                        </mat-form-field>
                                    </div>

                                    <div class="col-lg-3 col-sm-3 col-xs-12">
                                        <label>Gender</label>
                                        <div>
                                            <mat-radio-group formControlName="NextOfKinSex">
                                                <mat-radio-button value="0" required>Male</mat-radio-button>
                                                <mat-radio-button value="1" required>Female</mat-radio-button>
                                            </mat-radio-group>
                                        </div>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-lg-3 col-sm-3 col-xs-12">
                                        <mat-form-field>
                                            <mat-select placeholder="Kin's Relationship" formControlName="NextOfKinRelationship" id="nextOfKinRelationship" name="nextOfKinRelationship">
                                                <mat-option></mat-option>
                                            </mat-select>
                                        </mat-form-field>
                                    </div>

                                    <div class="col-lg-3 col-sm-3 col-xs-12">
                                        <mat-form-field>
                                            <input matInput placeholder="Mobile No." formControlName="NextOfKinMobileNumber" id="nextOfKinMobileNumber" name="nextOfKinMobileNumber">
                                        </mat-form-field>
                                    </div>

                                    <div class="col-lg-3 col-sm-3 col-xs-12">
                                        <mat-form-field>
                                            <mat-select placeholder="Consent to Calls/SMS to this contact in case of emergencies" formControlName="NextOfKinConsent"
                                                id="nextOfKinConsent" name="nextOfKinConsent">
                                                <mat-option></mat-option>
                                            </mat-select>
                                        </mat-form-field>
                                    </div>

                                    <div class="col-lg-3 col-sm-3 col-xs-12">
                                        <mat-form-field>
                                            <input matInput placeholder="Consent Decline Reason" formControlName="NextOfKinConsentDeclineReason" id="nextOfKinConsentDeclineReason"
                                                name="nextOfKinConsentDeclineReason">
                                        </mat-form-field>
                                    </div>
                                </div>

                                <div class="row">
                                    <button mat-raised-button color="accent" matStepperPrevious type="button">Back</button>
                                    &nbsp;&nbsp;
                                    <button mat-raised-button color="primary" type="submit" (click)="onSubmitForm()">Register and Continue</button>
                                    &nbsp;&nbsp;
                                    <button mat-raised-button color="primary" type="submit" (click)="onSubmitForm()">Save and Register New</button>
                                    &nbsp;&nbsp;
                                    <button mat-raised-button color="primary" type="submit" (click)="onSubmitForm()">Close Registration</button>
                                </div>
                            </mat-step>
                        </mat-horizontal-stepper>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>